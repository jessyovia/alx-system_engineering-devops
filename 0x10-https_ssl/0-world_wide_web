#!/usr/bin/env bash
# This script audits subdomains of a given domain

if [[ $# -lt 1 || $# -gt 2 ]]; then
    echo "Usage: $0 domain [subdomain]"
    exit 1
fi

domain=$1
subdomains=("www" "lb-01" "web-01" "web-02")

if [[ $# -eq 2 ]]; then
    subdomains=($2)
fi

for subdomain in "${subdomains[@]}"; do
    record=$(dig +short $subdomain.$domain)
    record_type=$(dig +short $subdomain.$domain | awk '{ print $4 }')
    echo "The subdomain $subdomain is a $record_type record and points to $record"
done
